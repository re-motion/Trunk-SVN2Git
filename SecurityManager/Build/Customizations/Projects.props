<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <PropertyGroup>
    <TestSetupBuildFileForDatabase>$(SolutionDirectory)Build\TestingSetupForDatabase.targets</TestSetupBuildFileForDatabase>
  </PropertyGroup>

  <PropertyGroup>
    <!-- PR Note: We should pass these though our build server so we don't expose the urls -->
    <DockerImageForNet472></DockerImageForNet472>
    <DockerImageForNet48></DockerImageForNet48>
  </PropertyGroup>

  <ItemGroup>
    <SupportedBrowsers Include="NoBrowser"/>
    <SupportedPlatforms Include="x86;x64"/>
    <!-- Remove SqlServer2012;   -->
    <SupportedDatabaseSystems Include="SqlServerDefault;SqlServer2012;SqlServer2014;SqlServer2016;SqlServer2017;SqlServer2019"/>
    <SupportedExecutionRuntimes Include="Win_NET472::$(DockerImageForNet472);Win_NET48::$(DockerImageForNet48)"/>
    <SupportedTargetRuntimes Include="NET48;NET472;"/>
    <SupportedConfigurationIDs Include="Debug;Release"/>
  </ItemGroup>

  <ItemGroup>
    <ReleaseProjectFiles Include="$(SolutionDirectory)\SecurityManager\AclTools.Expander\SecurityManager.AclTools.Expander.csproj"/>
    <ReleaseProjectFiles Include="$(SolutionDirectory)\SecurityManager\Clients.Web\SecurityManager.Clients.Web.csproj"/>
    <ReleaseProjectFiles Include="$(SolutionDirectory)\SecurityManager\Core\SecurityManager.Core.csproj"/>
    <ReleaseProjectFiles Include="$(SolutionDirectory)\SecurityManager\Documentation\SecurityManager.Documentation.csproj">
      <CreateDocumentationFile>True</CreateDocumentationFile>
    </ReleaseProjectFiles>
    <ReleaseProjectFiles Include="$(SolutionDirectory)\SecurityManager\Metadata.Importer\SecurityManager.Metadata.Importer.csproj"/>
    <UnitTestProjectFiles Include="$(SolutionDirectory)\SecurityManager\Core.UnitTests\SecurityManager.Core.UnitTests.csproj">
      <TestSetupBuildFile>$(TestSetupBuildFileForDatabase)</TestSetupBuildFile>
      <TestConfiguration>
        Win_NET48  + NET48  + NoBrowser + SqlServer2016 + Debug   + x86;
        Win_NET48  + NET48  + NoBrowser + SqlServer2016 + Release + x86;
        Win_NET48  + NET48  + NoBrowser + SqlServer2016 + Debug   + x64;
        Win_NET48  + NET48  + NoBrowser + SqlServer2016 + Release + x64;

        <!-- Compatibility Mode -->
        Win_NET48  + NET472 + NoBrowser + SqlServer2017 + Release + x64;
        Win_NET48  + NET472 + NoBrowser + SqlServer2014 + Release + x64; <!-- Change to SqlServer2019 once it exists -->
        Win_NET472 + NET472 + NoBrowser + SqlServer2016 + Release + x64;
        Win_NET472 + NET472 + NoBrowser + SqlServer2014 + Release + x64;
      </TestConfiguration>
    </UnitTestProjectFiles>
  </ItemGroup>
</Project>